# Конфигурация End-to-End Pipeline для обучения YOLO модели детекции солдат

# ========== ПУТИ ==========
paths:
  # Входная папка с видео (относительно корня проекта CV_drone)
  video_dir: "data/raw_data/downloaded_videos"
  
  # Выходная папка для кадров (относительно папки rest)
  frames_dir: "data/raw_data/raw_frames"
  
  # Папка для очищенных кадров (после удаления дубликатов)
  clean_frames_dir: "data/raw_data/clean_frames"
  
  # Папка для аннотаций
  annotations_dir: "data/raw_data/auto_annotations"
  
  # Папка для датасета YOLO (train/val/test)
  dataset_dir: "data/train_data"
  
  # Папка для сохранения моделей и экспериментов
  output_dir: "outputs"

  test_dir: "data/test_data"

  test_results: "data/test_results"

  test_video_dir: 'data/test_videos'

  test_video_results: 'data/test_video_results'
  
  # Папка для хранения обученных моделей с понятными именами
  # Рекомендуется называть модели: model_YYYY-MM-DD_description.pt
  # Например: model_2025-12-20_soldier_detection_v1.pt
  models_dir: "models"

# ========== ПРОЦЕСС 1: ПРЕДОБРАБОТКА ==========
preprocess:
  video_processing:
    fps: 0.33
    video_formats: [".mp4", ".mov", ".avi", ".mkv", ".MP4"]
    jpeg_quality: 95
  deduplication:
    hash_threshold: 5
    hash_method: "phash"
    min_image_size: 32

# ========== ПРОЦЕСС 2: АВТОРАЗМЕТКА ==========
annotation:
  pretrained_model: "best.pt" # from models/
  confidence_threshold: 0.25
  iou_threshold: 0.45
  target_class: 0
  class_name: "soldier"

# ========== ПРОЦЕСС 3: СПЛИТ ==========
split:
  train: 0.8
  val: 0.1
  test: 0.1
  seed: 42

# ========== ПРОЦЕСС 4: ОБУЧЕНИЕ YOLO ==========
training:
  model: "yolo11n.pt" # from models/
  finetune_model: "best.pt" # from models/
  epochs: 2
  batch_size: 16
  num_workers: 2
  lr: 0.001
  weight_decay: 0.0005
  image_size: 640
  device: "cuda"
  save_every: 1

predict:
  model: "best_5783f.pt" # from models/
  conf: 0.2
  iou: 0.2
  image_size: 640
  device: "cuda"
  tracker: "bytetrack.yaml"

# ========== ОБЩИЕ НАСТРОЙКИ ==========
general:
  # Уровень логирования (DEBUG, INFO, WARNING, ERROR)
  log_level: "INFO"
  
  # Random seed для воспроизводимости
  seed: 42
  
  # Количество потоков для CPU операций
  num_threads: 8

